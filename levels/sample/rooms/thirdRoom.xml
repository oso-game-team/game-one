<!-- This file describes the first room. Normally I break each room into its
own self-contained file. This isn't fundamentally necessary, but it's very
natural. It also allows you to very easily load content only once a room 
is entered for the first time. -->
<sburb description="third room">

<dependencies>
	<dependency>chars/posty.xml</dependency> <!-- loading in everything posty entails -->
	<dependency>chars/gr.xml</dependency> <!-- and now gr!-->
	<dependency>chars/br.xml</dependency> <!-- and now br!-->
</dependencies>

<assets>
	<asset name='Room03_0_0' type='graphic'>backgrounds/slices/Room03_0_0.png</asset>
	<asset name='Room03_0_1' type='graphic'>backgrounds/slices/Room03_0_1.png</asset>
	<asset name='Room03_1_0' type='graphic'>backgrounds/slices/Room03_1_0.png</asset>
	<asset name='Room03_1_1' type='graphic'>backgrounds/slices/Room03_1_1.png</asset>
	<asset name='Room03_2_0' type='graphic'>backgrounds/slices/Room03_2_0.png</asset>
	<asset name='Room03_2_1' type='graphic'>backgrounds/slices/Room03_2_1.png</asset>

	<asset name='Room03Map' type='graphic'>backgrounds/Room03Map.png</asset>
</assets>


<!-- We wrap all room tags in the rooms tag. This is mostly useless since it's
not good practice to keep multiple rooms in one file, but hey, better
safe than sorry.-->
<rooms>
	<room name='Room03' walkableMap='Room03Map' scale='4'>
		<triggers>
  			<trigger>spriteProperty,posty,y>690
	  			<action command='changeRoomRemote'>rooms/firstRoom.xml,Room01,940,180</action>
	  		</trigger>

			<trigger>spriteProperty,posty,y&lt;45
	  			<action command='changeRoomRemote'>rooms/fourthRoom.xml,Room04,285,675</action>
	  		</trigger>

			<trigger>spriteProperty,gr,y>690
				<action command='deltaSprite'>
					<args>char,0,-12</args>
					<action command='talk'>
						@! You can't leave this room as this character!
					</action>
				</action>
	  		</trigger>

			<trigger>spriteProperty,gr,y&lt;45
	  			<action command='deltaSprite'>
					<args>char,0,12</args>
					<action command='talk'>
						@! You can't leave this room as this character!
					</action>
				</action>
	  		</trigger>
  		</triggers>

		<character class='br' name = 'br' x='450' y='400'>
			<action class='moveTalk'/>
		</character>

		<character class='gr' name = 'gr' x='1090' y='225'>
			<action class='basicTalk'/>
			<action name='Be Green Rectangle.' command='macro'>
				<args>
					<action command='changeChar' noDelay='true'>
						<args>gr</args>
						<action command='playSong' noDelay='true'>
							<args>grSong,0</args>
							<action command='removeAction'>
								<args>br, Ask him to move.</args>
								<action command='addActions'>
									<args>br,
										<action name='Ask if he can move.' command='talk'>
											<args>
												@gr_sadtalk He-hello?
												@br_neutraltalk Yo dawg! 
												@gr_idle ...
												@gr_sadtalk Y'know, I once won an "Epic Fight Sisters" tournament and got $300 for a prize.
												@br_neutraltalk Woah, that's lowkey pretty dope.
												@gr_happytalk Oh really?
												@br_neutraltalk Yeah, dudette. You sound like you got some swag!
												@gr_happytalk Wow, thank you! Hey, could you please move out of the way for my friend Posty? She's cool too.
												@br_neutraltalk Fo' shizzle, dawg!
											</args>
											<action command='moveSprite'>
												<args>br,160,400</args>
												<action command='removeAction'>
													<args>br, Ask if he can move.</args>
												</action>
											</action>
										</action>
									</args>
								</action> 
							</action>
						</action>
					</action>
				</args>
			</action>
		</character>
		<!-- here we're adding in our BG and FG. This is the second half of our 
		optimization. To avoid creating a dozen sprites for every single tile, we
		specify that this image has been sliced up into tiles. Then we just specify
		how many there are and how big they are, and the system will find all of them
		and tile them correctly based on their names. This also makes it very easy
		to transition from using one big image to a sliced up one. -->

		<!-- Note no depthing specification puts a sprite in the background. Not 
		specifying coordinates also puts them at (0,0) by default (top-left corner). -->
		<sprite name='Room03BG'>
			<animation sheet='Room03' sliced='true' numCols='3' numRows='2' colSize='500' rowSize='500'/>
		</sprite>
	</room>
</rooms>
</sburb>
